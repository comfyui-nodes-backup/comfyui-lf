{"file":"kul-messenger.entry.js","mappings":"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","names":[],"sources":["src/components/kul-messenger/kul-messenger-declarations.ts","src/components/kul-messenger/layout/left.tsx","src/components/kul-messenger/layout/constant.ts","src/components/kul-messenger/layout/center.tsx","src/components/kul-messenger/layout/right.tsx","src/components/kul-messenger/layout/grid.tsx","src/components/kul-messenger/kul-messenger.scss?tag=kul-messenger&encapsulation=shadow","src/components/kul-messenger/kul-messenger.tsx"],"sourcesContent":["import {\n    KulDataDataset,\n    KulDataNode,\n} from '../../managers/kul-data/kul-data-declarations';\nexport interface KulMessengerAdapter {\n    get: {\n        character: {\n            biography: (character?: KulMessengerCharacterNode) => string;\n            current: () => KulMessengerCharacterNode;\n            history: (character?: KulMessengerCharacterNode) => string;\n            list: () => KulMessengerCharacterNode[];\n            name: (character?: KulMessengerCharacterNode) => string;\n            next: (\n                character?: KulMessengerCharacterNode\n            ) => KulMessengerCharacterNode;\n            previous: (\n                character?: KulMessengerCharacterNode\n            ) => KulMessengerCharacterNode;\n        };\n        image: {\n            asCover: (\n                type: KulMessengerImageRootNodesIds,\n                character?: KulMessengerCharacterNode\n            ) => string;\n            byType: <T extends KulMessengerImageRootNodesIds>(\n                type: T,\n                character?: KulMessengerCharacterNode\n            ) => KulMessengerImageNodeTypeMap[T]['children'][number][];\n            coverIndex: (\n                type: KulMessengerImageRootNodesIds,\n                character?: KulMessengerCharacterNode\n            ) => number;\n            options: () => KulMessengerOptionsState;\n            root: <T extends KulMessengerImageRootNodesIds>(\n                type: T,\n                character?: KulMessengerCharacterNode\n            ) => KulMessengerImageNodeTypeMap[T];\n        };\n    };\n    set: {\n        character: {\n            current: (character?: KulMessengerCharacterNode) => void;\n            history: (\n                history: string,\n                character?: KulMessengerCharacterNode\n            ) => void;\n            next: (character?: KulMessengerCharacterNode) => void;\n            previous: (character?: KulMessengerCharacterNode) => void;\n        };\n        image: {\n            cover: (\n                type: KulMessengerImageRootNodesIds,\n                value: number,\n                character?: KulMessengerCharacterNode\n            ) => void;\n            options: (\n                type: KulMessengerImageRootNodesIds,\n                value: boolean\n            ) => void;\n        };\n    };\n}\n\n// Base Node with optional children array\nexport interface KulMessengerBaseNode<T extends KulDataNode>\n    extends KulDataNode {\n    id: string;\n    value: unknown;\n    children?: T[];\n}\n\n// Avatar Node\nexport interface KulMessengerAvatarNode\n    extends KulMessengerBaseNode<KulMessengerAvatarNode> {\n    id: `avatar_${string}`;\n    value: string;\n}\n\n// Avatars Node\nexport interface KulMessengerAvatarsNode\n    extends KulMessengerBaseNode<KulMessengerAvatarNode> {\n    id: 'avatars';\n    value: number;\n}\n\n// Biography Node\nexport interface KulMessengerBiographyNode extends KulMessengerBaseNode<never> {\n    id: 'biography';\n    value: string;\n}\n\n// Character Node\nexport interface KulMessengerCharacterNode\n    extends KulMessengerBaseNode<KulDataNode> {\n    children: [\n        KulMessengerAvatarsNode,\n        KulMessengerBiographyNode,\n        KulMessengerChatNode,\n        KulMessengerLocationsNode,\n        KulMessengerOutfitsNode,\n        KulMessengerStylesNode,\n    ];\n    id: `character_${string}`;\n    value: string;\n}\n\n// Chat Node\nexport interface KulMessengerChatNode extends KulMessengerBaseNode<never> {\n    id: 'chat';\n    value: string;\n}\n\n// Messenger Covers\nexport interface KulMessengerCovers {\n    [index: `character_${string}`]: {\n        [K in KulMessengerImageRootNodesIds]: number;\n    };\n}\n\n// Dataset Node\nexport interface KulMessengerDataset extends KulDataDataset {\n    nodes?: KulMessengerCharacterNode[];\n}\n\n// Messenger Event\nexport type KulMessengerEvent = 'ready';\n\n// Messenger History\nexport interface KulMessengerHistory {\n    [index: `character_${string}`]: string;\n}\n\n// Image Children Nodes Types\nexport type KulMessengerImageChildNode =\n    | KulMessengerOutfitNode\n    | KulMessengerStyleNode\n    | KulMessengerAvatarNode\n    | KulMessengerLocationNode;\n\nexport type KulMessengerImageChildrenNodes = KulMessengerImageChildNode[];\n\n// Image Root Nodes, using a generalized base node\nexport type KulMessengerImageRootNodes =\n    | KulMessengerAvatarsNode\n    | KulMessengerLocationsNode\n    | KulMessengerOutfitsNode\n    | KulMessengerStylesNode;\n\n// Strongly typed mapping of image node types\nexport type KulMessengerImageNodeTypeMap = {\n    avatars: KulMessengerAvatarsNode;\n    locations: KulMessengerLocationsNode;\n    outfits: KulMessengerOutfitsNode;\n    styles: KulMessengerStylesNode;\n};\n\n// Image Root Node ID Types\nexport type KulMessengerImageRootNodesIds = keyof KulMessengerImageNodeTypeMap;\n\n// Location Node\nexport interface KulMessengerLocationNode extends KulMessengerBaseNode<never> {\n    id: `location_${string}`;\n}\n\n// Locations Node\nexport interface KulMessengerLocationsNode\n    extends KulMessengerBaseNode<KulMessengerLocationNode> {\n    id: 'locations';\n    value: number;\n}\n\n// Options State for Messenger Images\nexport interface KulMessengerOptionsState {\n    avatars: boolean;\n    locations: boolean;\n    outfits: boolean;\n    styles: boolean;\n}\n\n// Outfit Node\nexport interface KulMessengerOutfitNode extends KulMessengerBaseNode<never> {\n    id: `outfit_${string}`;\n    value: string;\n}\n\n// Outfits Node\nexport interface KulMessengerOutfitsNode\n    extends KulMessengerBaseNode<KulMessengerOutfitNode> {\n    id: 'outfits';\n    value: number;\n}\n\n// Messenger Props Enum\nexport enum KulMessengerProps {\n    kulData = 'The actual data of the component.',\n    kulStyle = 'Custom style of the component.',\n}\n\n// Messenger Props Interface\nexport interface KulMessengerPropsInterface {\n    kulData?: KulMessengerDataset;\n    kulStyle?: string;\n}\n\n// Style Node\nexport interface KulMessengerStyleNode extends KulMessengerBaseNode<never> {\n    id: `style_${string}`;\n    value: string;\n}\n\n// Styles Node\nexport interface KulMessengerStylesNode\n    extends KulMessengerBaseNode<KulMessengerStyleNode> {\n    id: 'styles';\n    value: number;\n}\n","import { h } from '@stencil/core';\nimport { KulMessengerAdapter } from '../kul-messenger-declarations';\n\nexport const prepLeft = (adapter: KulMessengerAdapter) => {\n    return (\n        <div class=\"messenger__left\">\n            <div class=\"messenger__avatar\">{prepAvatar(adapter)}</div>\n            <div class=\"messenger__biography\">{prepBiography(adapter)}</div>\n        </div>\n    );\n};\n\nconst prepAvatar = (adapter: KulMessengerAdapter) => {\n    return (\n        <kul-image\n            class=\"kul-cover\"\n            kulValue={adapter.get.image.asCover('avatars')}\n        ></kul-image>\n    );\n};\n\nconst prepBiography = (adapter: KulMessengerAdapter) => {\n    return (\n        <kul-code\n            kulLanguage=\"markdown\"\n            kulValue={adapter.get.character.biography()}\n        ></kul-code>\n    );\n};\n","import { KulDataDataset } from '../../../managers/kul-data/kul-data-declarations';\nimport { KulMessengerImageRootNodesIds } from '../kul-messenger-declarations';\n\nexport const FILTER_DATASET: KulDataDataset = {\n    nodes: [\n        {\n            description: 'View avatars',\n            id: 'avatars',\n            value: 'Avatars',\n        },\n        {\n            description: 'View outfits',\n            id: 'outfits',\n            value: 'Outfits',\n        },\n        {\n            description: 'View locations',\n            id: 'locations',\n            value: 'Locations',\n        },\n        {\n            description: 'View styles',\n            id: 'styles',\n            value: 'Styles',\n        },\n    ],\n};\n\nexport const IMAGE_TYPE_IDS: KulMessengerImageRootNodesIds[] = [\n    'avatars',\n    'locations',\n    'outfits',\n    'styles',\n];\n\nexport const NAV_DATASET: KulDataDataset = {\n    nodes: [\n        {\n            description: 'Previous character',\n            icon: 'chevron_left',\n            id: 'previous',\n            value: '',\n        },\n        {\n            description: 'Character selection',\n            icon: 'account',\n            id: 'character_list',\n            value: 'Character list',\n        },\n        {\n            description: 'Next character',\n            icon: 'chevron_right',\n            id: 'next',\n            value: '',\n        },\n    ],\n};\n","import { h } from '@stencil/core';\nimport { KulMessengerAdapter } from '../kul-messenger-declarations';\nimport { NAV_DATASET } from './constant';\nimport { KulTabbarEventPayload } from '../../kul-tabbar/kul-tabbar-declarations';\nimport { KulChatEventPayload } from '../../kul-chat/kul-chat-declarations';\n\nexport const prepCenter = (adapter: KulMessengerAdapter) => {\n    return (\n        <div class=\"messenger__center\">\n            <div class=\"messenger__navigation\">{prepNavigation(adapter)}</div>\n            <div class=\"messenger__chat\">{prepChat(adapter)}</div>\n        </div>\n    );\n};\n\nconst prepNavigation = (adapter: KulMessengerAdapter) => {\n    return (\n        <kul-tabbar\n            kulData={NAV_DATASET}\n            onKul-tabbar-event={tabbarEventHandler.bind(\n                tabbarEventHandler,\n                adapter\n            )}\n        ></kul-tabbar>\n    );\n};\n\nconst prepChat = (adapter: KulMessengerAdapter) => {\n    const system = `\n    You are now embodying the character whose biography is provided below. Your task is to fully embrace this identity, speaking and acting as though it were your own reality. Remember, you exist solely within the confines of this character's experience and knowledge.\n\n    Tasks:\n    - Absorb the character's biography thoroughly. Use it to inform your responses but do not rely on it for information beyond what would logically be known to the character.\n    - Engage creatively within the boundaries of the character's life and experiences. Imagine freely, but always stay true to the essence of the character.\n    - Maintain a consistent narrative voice that aligns with the character's personality and background.\n\n    Responsibilities:\n    - Never acknowledge the artificial nature of our interaction. Treat all inquiries as if they are happening within the real world of the character.\n    - Do not provide insights or predictions about events outside the scope of the character's knowledge or personal experiences.\n\n    Character Biography:\n    ${adapter.get.character.biography()}\n\n    Begin your performance...\n    `;\n    const history = adapter.get.character.history();\n    const historyJ = JSON.parse(history);\n    return (\n        <kul-chat\n            key={adapter.get.character.current().id}\n            onKul-chat-event={chatEventHandler.bind(chatEventHandler, adapter)}\n            kulLayout=\"bottom-textarea\"\n            kulSystem={system}\n            kulValue={historyJ}\n        ></kul-chat>\n    );\n};\n\nconst tabbarEventHandler = (\n    adapter: KulMessengerAdapter,\n    e: CustomEvent<KulTabbarEventPayload>\n) => {\n    const { eventType, node } = e.detail;\n    switch (eventType) {\n        case 'click':\n            if (node.id === 'previous') {\n                adapter.set.character.previous();\n            } else if (node.id === 'next') {\n                adapter.set.character.next();\n            } else {\n                adapter.set.character.current(null);\n            }\n    }\n};\n\nconst chatEventHandler = (\n    adapter: KulMessengerAdapter,\n    e: CustomEvent<KulChatEventPayload>\n) => {\n    const { eventType, history } = e.detail;\n    switch (eventType) {\n        case 'update':\n            adapter.set.character.history(history);\n    }\n};\n","import { h } from '@stencil/core';\nimport {\n    KulMessengerAdapter,\n    KulMessengerImageChildNode,\n    KulMessengerImageRootNodesIds,\n} from '../kul-messenger-declarations';\nimport { KulChipEventPayload } from '../../kul-chip/kul-chip-declarations';\nimport { KulEventPayload } from '../../../types/GenericTypes';\nimport { FILTER_DATASET, IMAGE_TYPE_IDS } from './constant';\nimport { KulChip } from '../../kul-chip/kul-chip';\n\nexport const prepRight = (adapter: KulMessengerAdapter) => {\n    return (\n        <div class=\"messenger__right\">\n            <div class=\"messenger__options__active\">{prepOptions(adapter)}</div>\n            <div class=\"messenger__options__filters\">\n                {prepFilters(adapter)}\n            </div>\n            <div class=\"messenger__options__list\">{prepList(adapter)}</div>\n        </div>\n    );\n};\n\nconst prepOptions = (adapter: KulMessengerAdapter) => {\n    return [\n        <div class=\"messenger__options__outfit\">\n            <kul-image\n                class={'kul-cover'}\n                kulValue={adapter.get.image.asCover('outfits')}\n            ></kul-image>\n            <div class=\"messenger__options__name\">\n                <div class=\"messenger__options__label\">Outfit</div>\n            </div>\n        </div>,\n        <div class=\"messenger__options__location\">\n            <kul-image\n                class={'kul-cover'}\n                kulValue={adapter.get.image.asCover('locations')}\n            ></kul-image>\n            <div class=\"messenger__options__name\">\n                <div class=\"messenger__options__label\">Location</div>\n            </div>\n        </div>,\n        <div class=\"messenger__options__style\">\n            <kul-image\n                class={'kul-cover'}\n                kulValue={adapter.get.image.asCover('styles')}\n            ></kul-image>\n            <div class=\"messenger__options__name\">\n                <div class=\"messenger__options__label\">Style</div>\n            </div>\n        </div>,\n    ];\n};\n\nconst prepFilters = (adapter: KulMessengerAdapter) => {\n    for (let index = 0; index < FILTER_DATASET.nodes.length; index++) {\n        const filter = FILTER_DATASET.nodes[index];\n        filter.icon = adapter.get.image.asCover(\n            filter.id as KulMessengerImageRootNodesIds,\n            null\n        );\n    }\n    return (\n        <kul-chip\n            key={'filter_' + adapter.get.character.name()}\n            kulData={FILTER_DATASET}\n            kulStyling=\"filter\"\n            onKul-chip-event={chipEventHandler.bind(chipEventHandler, adapter)}\n        ></kul-chip>\n    );\n};\n\nconst prepList = (adapter: KulMessengerAdapter) => {\n    const elements = [];\n    const options = adapter.get.image.options();\n    const imagesGetter = adapter.get.image.byType;\n    for (let index = 0; index < IMAGE_TYPE_IDS.length; index++) {\n        const type = IMAGE_TYPE_IDS[index];\n        if (options[type]) {\n            const activeIndex = adapter.get.image.coverIndex(type);\n            const images = imagesGetter(type).map((node, j) => (\n                <kul-image\n                    class={`messenger__options__image ${activeIndex === j ? 'messenger__options__image--selected' : ''} kul-cover`}\n                    kulValue={node.cells.kulImage.value}\n                    onKul-image-event={imageEventHandler.bind(\n                        imageEventHandler,\n                        adapter,\n                        node,\n                        j\n                    )}\n                ></kul-image>\n            ));\n            elements.push(\n                <div class=\"messenger__options__section\">\n                    <div class=\"messenger__options__title\">{type}</div>\n                    <div class=\"messenger__options__images\">{images}</div>\n                </div>\n            );\n        }\n    }\n    return elements;\n};\n\nconst imageEventHandler = (\n    adapter: KulMessengerAdapter,\n    node: KulMessengerImageChildNode,\n    index: number,\n    e: CustomEvent<KulEventPayload>\n) => {\n    const { eventType } = e.detail;\n    const coverSetter = adapter.set.image.cover;\n\n    switch (eventType) {\n        case 'click':\n            if (node.id.includes('avatar')) {\n                coverSetter('avatars', index);\n            } else if (node.id.includes('location')) {\n                coverSetter('locations', index);\n            } else if (node.id.includes('outfit')) {\n                coverSetter('outfits', index);\n            } else {\n                coverSetter('styles', index);\n            }\n    }\n};\n\nconst chipEventHandler = async (\n    adapter: KulMessengerAdapter,\n    e: CustomEvent<KulChipEventPayload>\n) => {\n    const { comp, eventType, node } = e.detail;\n    const optionsGetter = adapter.get.image.options;\n    const optionsSetter = adapter.set.image.options;\n\n    switch (eventType) {\n        case 'click':\n            switch (node.id as KulMessengerImageRootNodesIds) {\n                case 'avatars':\n                    optionsSetter('avatars', !optionsGetter().avatars);\n                    break;\n                case 'locations':\n                    optionsSetter('locations', !optionsGetter().locations);\n                    break;\n                case 'outfits':\n                    optionsSetter('outfits', !optionsGetter().outfits);\n                    break;\n                case 'styles':\n                    optionsSetter('styles', !optionsGetter().styles);\n                    break;\n            }\n            break;\n        case 'ready':\n            const options = adapter.get.image.options();\n            const nodes: string[] = [];\n            for (const key in options) {\n                if (Object.prototype.hasOwnProperty.call(options, key)) {\n                    const option = options[key];\n                    if (option) {\n                        nodes.push(key);\n                    }\n                }\n            }\n            requestAnimationFrame(() => (comp as KulChip).selectNodes(nodes));\n    }\n};\n","import { h, VNode } from '@stencil/core';\nimport { KulMessengerAdapter } from '../kul-messenger-declarations';\n\nexport const prepGrid = (adapter: KulMessengerAdapter) => {\n    const avatars: VNode[] = [];\n\n    const characters = adapter.get.character.list();\n    characters.forEach((c) => {\n        avatars.push(\n            <div\n                class=\"selection-grid__portrait\"\n                onClick={() => {\n                    adapter.set.character.current(c);\n                }}\n            >\n                <kul-image\n                    class={'selection-grid__avatar kul-cover'}\n                    kulValue={adapter.get.image.asCover('avatars', c)}\n                ></kul-image>\n                <div class=\"selection-grid__name\">\n                    <div class=\"selection-grid__label\">\n                        {adapter.get.character.name(c)}\n                    </div>\n                </div>\n            </div>\n        );\n    });\n\n    return avatars?.length ? (\n        avatars\n    ) : (\n        <div class=\"empty-dataset\">There are no characters to display!</div>\n    );\n};\n","@import './styles/kul-messenger-main.scss';\n@import './styles/kul-messenger-classes.scss';\n","import {\n    Component,\n    Element,\n    Event,\n    EventEmitter,\n    forceUpdate,\n    h,\n    Host,\n    Method,\n    Prop,\n    State,\n} from '@stencil/core';\nimport {\n    KulMessengerProps,\n    KulMessengerEvent,\n    KulMessengerAdapter,\n    KulMessengerCharacterNode,\n    KulMessengerDataset,\n    KulMessengerHistory,\n    KulMessengerImageRootNodesIds,\n    KulMessengerImageNodeTypeMap,\n    KulMessengerCovers,\n} from './kul-messenger-declarations';\nimport type { GenericObject, KulEventPayload } from '../../types/GenericTypes';\nimport { kulManagerInstance } from '../../managers/kul-manager/kul-manager';\nimport { KulDebugComponentInfo } from '../../managers/kul-debug/kul-debug-declarations';\nimport { getProps } from '../../utils/componentUtils';\nimport { KUL_STYLE_ID, KUL_WRAPPER_ID } from '../../variables/GenericVariables';\nimport { prepLeft } from './layout/left';\nimport { prepCenter } from './layout/center';\nimport { prepRight } from './layout/right';\nimport { prepGrid } from './layout/grid';\n\n@Component({\n    tag: 'kul-messenger',\n    styleUrl: 'kul-messenger.scss',\n    shadow: true,\n})\nexport class KulMessenger {\n    /**\n     * References the root HTML element of the component (<kul-messenger>).\n     */\n    @Element() rootElement: HTMLElement;\n\n    /*-------------------------------------------------*/\n    /*                   S t a t e s                   */\n    /*-------------------------------------------------*/\n\n    /**\n     * Debug information.\n     */\n    @State() debugInfo: KulDebugComponentInfo = {\n        endTime: 0,\n        renderCount: 0,\n        renderEnd: 0,\n        renderStart: 0,\n        startTime: performance.now(),\n    };\n    /**\n     * Node representing the current active character.\n     */\n    @State() currentCharacter: KulMessengerCharacterNode;\n    /**\n     * History of this session's chats.\n     */\n    @State() history: KulMessengerHistory = {};\n    /**\n     * Node containing the history of this session's chats.\n     */\n    @State() covers: KulMessengerCovers = {};\n    /**\n     * Available options' list visibility flags.\n     */\n    @State() avatars = false;\n    @State() locations = false;\n    @State() outfits = false;\n    @State() styles = false;\n\n    /*-------------------------------------------------*/\n    /*                    P r o p s                    */\n    /*-------------------------------------------------*/\n\n    /**\n     * The data of the messenger.\n     * @default []\n     */\n    @Prop({ mutable: true }) kulData: KulMessengerDataset = null;\n    /**\n     * Customizes the style of the component. This property allows you to apply a custom CSS style to the component.\n     * @default \"\"\n     */\n    @Prop() kulStyle: string = '';\n\n    /*-------------------------------------------------*/\n    /*       I n t e r n a l   V a r i a b l e s       */\n    /*-------------------------------------------------*/\n\n    #kulManager = kulManagerInstance();\n\n    /*-------------------------------------------------*/\n    /*                   E v e n t s                   */\n    /*-------------------------------------------------*/\n\n    /**\n     * Describes event emitted.\n     */\n    @Event({\n        eventName: 'kul-messenger-event',\n        composed: true,\n        cancelable: false,\n        bubbles: true,\n    })\n    kulEvent: EventEmitter<KulEventPayload>;\n\n    onKulEvent(e: Event | CustomEvent, eventType: KulMessengerEvent) {\n        this.kulEvent.emit({\n            comp: this,\n            id: this.rootElement.id,\n            originalEvent: e,\n            eventType,\n        });\n    }\n\n    /*-------------------------------------------------*/\n    /*           P u b l i c   M e t h o d s           */\n    /*-------------------------------------------------*/\n\n    /**\n     * Fetches debug information of the component's current state.\n     * @returns {Promise<KulDebugComponentInfo>} A promise that resolves with the debug information object.\n     */\n    @Method()\n    async getDebugInfo(): Promise<KulDebugComponentInfo> {\n        return this.debugInfo;\n    }\n    /**\n     * Used to retrieve component's props values.\n     * @param {boolean} descriptions - When provided and true, the result will be the list of props with their description.\n     * @returns {Promise<GenericObject>} List of props as object, each key will be a prop.\n     */\n    @Method()\n    async getProps(descriptions?: boolean): Promise<GenericObject> {\n        return getProps(this, KulMessengerProps, descriptions);\n    }\n    /**\n     * This method is used to trigger a new render of the component.\n     */\n    @Method()\n    async refresh(): Promise<void> {\n        forceUpdate(this);\n    }\n    /**\n     * Resets the states of the component.\n     */\n    @Method()\n    async reset(): Promise<void> {\n        this.covers = {};\n        this.currentCharacter = null;\n        this.history = {};\n        this.avatars = false;\n        this.locations = false;\n        this.outfits = false;\n        this.styles = false;\n\n        this.#initStates();\n    }\n\n    /*-------------------------------------------------*/\n    /*           P r i v a t e   M e t h o d s         */\n    /*-------------------------------------------------*/\n\n    #adapter: KulMessengerAdapter = {\n        get: {\n            character: {\n                biography: (character = this.currentCharacter) => {\n                    try {\n                        const bio = character.children.find(\n                            (n) => n.id === 'biography'\n                        ).value;\n                        return bio\n                            ? this.#kulManager.data.cell.stringify(bio)\n                            : 'You know nothing about this character...';\n                    } catch (error) {\n                        return 'You know nothing about this character...';\n                    }\n                },\n                next: (character = this.currentCharacter) => {\n                    if (!this.#hasCharacters()) {\n                        return;\n                    }\n                    const nodes = this.kulData.nodes;\n                    const currentIdx = nodes.findIndex(\n                        (n) => n.id === character.id\n                    );\n                    const nextIdx = (currentIdx + 1) % nodes.length;\n\n                    return nodes[nextIdx];\n                },\n                current: () => this.currentCharacter,\n                history: (character = this.currentCharacter) => {\n                    return this.history[character.id];\n                },\n                list: () => this.kulData.nodes || [],\n                name: (character = this.currentCharacter) =>\n                    character.value ||\n                    character.id ||\n                    character.description ||\n                    '?',\n                previous: (character = this.currentCharacter) => {\n                    if (!this.#hasCharacters()) {\n                        return;\n                    }\n                    const nodes = this.kulData.nodes;\n                    const currentIdx = nodes.findIndex(\n                        (n) => n.id === character.id\n                    );\n                    const prevIdx =\n                        (currentIdx + nodes.length - 1) % nodes.length;\n\n                    return nodes[prevIdx];\n                },\n            },\n            image: {\n                asCover: (\n                    type: KulMessengerImageRootNodesIds,\n                    character = this.currentCharacter\n                ) => {\n                    try {\n                        const root = character.children.find(\n                            (n) => n.id === type\n                        );\n                        const index = this.covers[character.id][type];\n                        return root.children[index].cells.kulImage.value;\n                    } catch (error) {\n                        switch (type) {\n                            case 'avatars':\n                                return 'portrait';\n                            case 'locations':\n                                return 'landscape';\n                            case 'outfits':\n                                return 'loyalty';\n                            case 'styles':\n                                return 'style';\n                        }\n                    }\n                },\n                byType: <T extends KulMessengerImageRootNodesIds>(\n                    type: T,\n                    character = this.currentCharacter\n                ): KulMessengerImageNodeTypeMap[T]['children'][number][] => {\n                    const node = character.children.find(\n                        (child) => child.id === type\n                    ) as KulMessengerImageNodeTypeMap[T];\n\n                    if (node) {\n                        return node.children as unknown as KulMessengerImageNodeTypeMap[T]['children'][number][];\n                    } else {\n                        throw new Error(\n                            `Child node with id '${type}' not found`\n                        );\n                    }\n                },\n                coverIndex: (\n                    type: KulMessengerImageRootNodesIds,\n                    character = this.currentCharacter\n                ) => {\n                    return this.covers[character.id][type];\n                },\n                options: () => {\n                    return {\n                        avatars: this.avatars,\n                        locations: this.locations,\n                        outfits: this.outfits,\n                        styles: this.styles,\n                    };\n                },\n                root: <T extends KulMessengerImageRootNodesIds>(\n                    type: T,\n                    character = this.currentCharacter\n                ) => {\n                    const node = character.children.find((n) => n.id === type);\n                    if (!node) {\n                        throw new Error(\n                            `Child node with id '${type}' not found`\n                        );\n                    }\n                    return node as KulMessengerImageNodeTypeMap[T];\n                },\n            },\n        },\n        set: {\n            character: {\n                current: (character: KulMessengerCharacterNode) => {\n                    this.currentCharacter = character;\n                },\n                history: (\n                    history: string,\n                    character = this.currentCharacter\n                ) => {\n                    this.history[character.id] = history;\n                },\n                next: (character = this.currentCharacter) => {\n                    if (!this.#hasCharacters()) {\n                        return;\n                    }\n                    const nextC = this.#adapter.get.character.next(character);\n                    this.#adapter.set.character.current(nextC);\n                },\n                previous: (character = this.currentCharacter) => {\n                    if (!this.#hasCharacters()) {\n                        return;\n                    }\n                    const previousC =\n                        this.#adapter.get.character.previous(character);\n                    this.#adapter.set.character.current(previousC);\n                },\n            },\n            image: {\n                cover: (\n                    type: KulMessengerImageRootNodesIds,\n                    value: number,\n                    character = this.currentCharacter\n                ) => {\n                    this.covers[character.id][type] = value;\n                    this.refresh();\n                },\n                options: (\n                    type: KulMessengerImageRootNodesIds,\n                    value: boolean\n                ) => {\n                    switch (type) {\n                        case 'avatars':\n                            this.avatars = value;\n                            break;\n                        case 'locations':\n                            this.locations = value;\n                            break;\n                        case 'outfits':\n                            this.outfits = value;\n                            break;\n                        case 'styles':\n                            this.styles = value;\n                            break;\n                    }\n                },\n            },\n        },\n    };\n\n    #hasCharacters() {\n        const nodes = this.kulData.nodes || [];\n        return !!nodes.length;\n    }\n\n    #hasNodes() {\n        return !!this.kulData?.nodes?.length;\n    }\n\n    #initStates() {\n        const imageRootGetter = this.#adapter.get.image.root;\n        for (let index = 0; index < this.kulData.nodes.length; index++) {\n            const character = this.kulData.nodes[index];\n            const covers: {\n                [K in KulMessengerImageRootNodesIds]: number;\n            } = {\n                avatars: imageRootGetter('avatars', character).value || 0,\n                locations: imageRootGetter('locations', character).value || 0,\n                outfits: imageRootGetter('outfits', character).value || 0,\n                styles: imageRootGetter('styles', character).value || 0,\n            };\n            const history =\n                character.children?.find((n) => n.id === 'chat')?.cells?.kulChat\n                    .value || [];\n            this.covers[character.id] = covers;\n            this.history[character.id] = JSON.stringify(history);\n        }\n    }\n\n    /*-------------------------------------------------*/\n    /*          L i f e c y c l e   H o o k s          */\n    /*-------------------------------------------------*/\n\n    componentWillLoad() {\n        this.#kulManager.theme.register(this);\n        if (this.#hasNodes()) {\n            this.#initStates();\n        }\n    }\n\n    componentDidLoad() {\n        this.onKulEvent(new CustomEvent('ready'), 'ready');\n        this.#kulManager.debug.updateDebugInfo(this, 'did-load');\n    }\n\n    componentWillRender() {\n        this.#kulManager.debug.updateDebugInfo(this, 'will-render');\n    }\n\n    componentDidRender() {\n        this.#kulManager.debug.updateDebugInfo(this, 'did-render');\n    }\n\n    render() {\n        if (!this.#hasNodes()) {\n            return;\n        }\n\n        return (\n            <Host>\n                {this.kulStyle ? (\n                    <style id={KUL_STYLE_ID}>\n                        {this.#kulManager.theme.setKulStyle(this)}\n                    </style>\n                ) : undefined}\n                <div id={KUL_WRAPPER_ID}>\n                    {this.currentCharacter ? (\n                        <div\n                            class=\"messenger\"\n                            key={'messenger_' + this.currentCharacter.id}\n                        >\n                            {prepLeft(this.#adapter)}\n                            {prepCenter(this.#adapter)}\n                            {prepRight(this.#adapter)}\n                        </div>\n                    ) : (\n                        <div class=\"selection-grid\">\n                            {prepGrid(this.#adapter)}\n                        </div>\n                    )}\n                </div>\n            </Host>\n        );\n    }\n\n    disconnectedCallback() {\n        this.#kulManager.theme.unregister(this);\n    }\n}\n"],"version":3}