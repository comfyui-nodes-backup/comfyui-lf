{"file":"kul-article.entry.js","mappings":"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","names":[],"sources":["src/components/kul-article/kul-article-declarations.ts","src/components/kul-article/kul-article.scss?tag=kul-article&encapsulation=shadow","src/components/kul-article/kul-article.tsx"],"sourcesContent":["import {\n  KulDataDataset,\n  KulDataNode,\n} from \"../../managers/kul-data/kul-data-declarations\";\nimport { KulEventPayload } from \"../../types/GenericTypes\";\n\n//#region Dataset\nexport interface KulArticleDataset extends KulDataDataset {\n  nodes: KulArticleNode[];\n}\nexport interface KulArticleNode extends KulDataNode {\n  children?: KulArticleNode[];\n  tagName?: \"br\" | \"code\" | \"h1\" | \"h2\" | \"h3\" | \"li\" | \"pre\" | \"strong\";\n}\n//#endregion\n\n//#region Events\nexport type KulArticleEvent = \"kul-event\" | \"ready\" | \"unmount\";\nexport interface KulArticleEventPayload\n  extends KulEventPayload<\"KulArticle\", KulArticleEvent> {}\n//#endregion\n\n//#region Props\nexport enum KulArticleProps {\n  kulData = \"Actual data of the article\",\n  kulStyle = \"Custom style of the component.\",\n}\nexport interface KulArticlePropsInterface {\n  kulData?: KulArticleDataset;\n  kulStyle?: string;\n}\n//#endregion\n","@import \"./styles/kul-article-main.scss\";\n@import \"./styles/kul-article-classes.scss\";\n","import {\n  Component,\n  Element,\n  Event,\n  EventEmitter,\n  forceUpdate,\n  Fragment,\n  h,\n  Host,\n  Method,\n  Prop,\n  State,\n  VNode,\n} from \"@stencil/core\";\n\nimport {\n  KulArticleDataset,\n  KulArticleEvent,\n  KulArticleEventPayload,\n  KulArticleNode,\n  KulArticleProps,\n} from \"./kul-article-declarations\";\nimport { KulDebugLifecycleInfo } from \"../../managers/kul-debug/kul-debug-declarations\";\nimport { KulLanguageGeneric } from \"../../managers/kul-language/kul-language-declarations\";\nimport { kulManagerInstance } from \"../../managers/kul-manager/kul-manager\";\nimport { GenericObject } from \"../../types/GenericTypes\";\nimport { getProps } from \"../../utils/componentUtils\";\nimport { KUL_STYLE_ID, KUL_WRAPPER_ID } from \"../../variables/GenericVariables\";\n\n@Component({\n  assetsDirs: [\"assets/fonts\"],\n  tag: \"kul-article\",\n  styleUrl: \"kul-article.scss\",\n  shadow: true,\n})\nexport class KulArticle {\n  /**\n   * References the root HTML element of the component (<kul-article>).\n   */\n  @Element() rootElement: HTMLKulArticleElement;\n\n  /*-------------------------------------------------*/\n  /*                   S t a t e s                   */\n  /*-------------------------------------------------*/\n\n  /**\n   * Debug information.\n   */\n  @State() debugInfo: KulDebugLifecycleInfo = {\n    endTime: 0,\n    renderCount: 0,\n    renderEnd: 0,\n    renderStart: 0,\n    startTime: performance.now(),\n  };\n\n  /*-------------------------------------------------*/\n  /*                    P r o p s                    */\n  /*-------------------------------------------------*/\n\n  /**\n   * The actual data of the article.\n   * @default null\n   */\n  @Prop({ mutable: true }) kulData: KulArticleDataset = null;\n  /**\n   * Enables customization of the component's style.\n   * @default \"\" - No custom style applied by default.\n   */\n  @Prop({ mutable: true, reflect: true }) kulStyle = \"\";\n\n  /*-------------------------------------------------*/\n  /*       I n t e r n a l   V a r i a b l e s       */\n  /*-------------------------------------------------*/\n\n  #kulManager = kulManagerInstance();\n\n  /*-------------------------------------------------*/\n  /*                   E v e n t s                   */\n  /*-------------------------------------------------*/\n\n  /**\n   * Describes event emitted.\n   */\n  @Event({\n    eventName: \"kul-article-event\",\n    composed: true,\n    cancelable: false,\n    bubbles: true,\n  })\n  kulEvent: EventEmitter<KulArticleEventPayload>;\n\n  onKulEvent(e: Event | CustomEvent, eventType: KulArticleEvent) {\n    this.kulEvent.emit({\n      comp: this,\n      eventType,\n      id: this.rootElement.id,\n      originalEvent: e,\n    });\n  }\n\n  /*-------------------------------------------------*/\n  /*           P u b l i c   M e t h o d s           */\n  /*-------------------------------------------------*/\n\n  /**\n   * Retrieves the debug information reflecting the current state of the component.\n   * @returns {Promise<KulDebugLifecycleInfo>} A promise that resolves to a KulDebugLifecycleInfo object containing debug information.\n   */\n  @Method()\n  async getDebugInfo(): Promise<KulDebugLifecycleInfo> {\n    return this.debugInfo;\n  }\n  /**\n   * Retrieves the properties of the component, with optional descriptions.\n   * @param {boolean} descriptions - If true, returns properties with descriptions; otherwise, returns properties only.\n   * @returns {Promise<GenericObject>} A promise that resolves to an object where each key is a property name, optionally with its description.\n   */\n  @Method()\n  async getProps(descriptions?: boolean): Promise<GenericObject> {\n    return getProps(this, KulArticleProps, descriptions);\n  }\n  /**\n   * Triggers a re-render of the component to reflect any state changes.\n   */\n  @Method()\n  async refresh(): Promise<void> {\n    forceUpdate(this);\n  }\n  /**\n   * Initiates the unmount sequence, which removes the component from the DOM after a delay.\n   * @param {number} ms - Number of milliseconds\n   */\n  @Method()\n  async unmount(ms: number = 0): Promise<void> {\n    setTimeout(() => {\n      this.onKulEvent(new CustomEvent(\"unmount\"), \"unmount\");\n      this.rootElement.remove();\n    }, ms);\n  }\n\n  /*-------------------------------------------------*/\n  /*           P r i v a t e   M e t h o d s         */\n  /*-------------------------------------------------*/\n\n  #recursive(node: KulArticleNode, depth: number) {\n    switch (depth) {\n      case 0:\n        return this.#articleTemplate(node, depth);\n      case 1:\n        return this.#sectionTemplate(node, depth);\n      case 2:\n        return this.#paragraphTemplate(node, depth);\n      default:\n        return node.children?.length\n          ? this.#wrapperTemplate(node, depth)\n          : this.#contentTemplate(node, depth);\n    }\n  }\n\n  #articleTemplate(node: KulArticleNode, depth: number): VNode {\n    return (\n      <Fragment>\n        <article\n          class=\"article\"\n          data-depth={depth.toString()}\n          style={node.cssStyle}\n        >\n          {node.value ? <h1>{node.value}</h1> : undefined}\n          {node.children\n            ? node.children.map((child) => this.#recursive(child, depth + 1))\n            : null}\n        </article>\n      </Fragment>\n    );\n  }\n\n  #sectionTemplate(node: KulArticleNode, depth: number): VNode {\n    return (\n      <Fragment>\n        <section\n          class=\"section\"\n          data-depth={depth.toString()}\n          style={node.cssStyle}\n        >\n          {node.value ? <h2>{node.value}</h2> : undefined}\n          {node.children\n            ? node.children.map((child) => this.#recursive(child, depth + 1))\n            : null}\n        </section>\n      </Fragment>\n    );\n  }\n\n  #wrapperTemplate(node: KulArticleNode, depth: number): VNode {\n    const ComponentTag = node.children?.some((child) => child.tagName === \"li\")\n      ? \"ul\"\n      : node.tagName\n        ? node.tagName\n        : \"div\";\n    return (\n      <Fragment>\n        {node.value ? <div>{node.value}</div> : \"\"}\n        <ComponentTag\n          class=\"content-wrapper\"\n          data-depth={depth.toString()}\n          style={node.cssStyle}\n        >\n          {node.children\n            ? node.children.map((child) => this.#recursive(child, depth + 1))\n            : null}\n        </ComponentTag>\n      </Fragment>\n    );\n  }\n\n  #paragraphTemplate(node: KulArticleNode, depth: number): VNode {\n    return (\n      <Fragment>\n        <p\n          class=\"paragraph\"\n          data-depth={depth.toString()}\n          style={node.cssStyle}\n        >\n          {node.value ? <h3>{node.value}</h3> : undefined}\n          {node.children\n            ? node.children.map((child) => this.#recursive(child, depth + 1))\n            : null}\n        </p>\n      </Fragment>\n    );\n  }\n\n  #contentTemplate(node: KulArticleNode, depth: number): VNode {\n    const decorator = kulManagerInstance().data.cell.shapes.decorate;\n\n    const key = node?.cells && Object.keys(node.cells)[0];\n    const cell = node?.cells?.[key];\n\n    if (cell) {\n      const shape = decorator(cell.shape, [cell], async (e) =>\n        this.onKulEvent(e, \"kul-event\"),\n      );\n      return shape.element[0];\n    } else {\n      const ComponentTag = node.tagName ? node.tagName : \"span\";\n      return (\n        <ComponentTag\n          class={`content content--${ComponentTag}`}\n          data-depth={depth.toString()}\n          style={node.cssStyle}\n        >\n          {node.value}\n        </ComponentTag>\n      );\n    }\n  }\n\n  #prepArticle(): VNode[] {\n    const elements: VNode[] = [];\n    const nodes = this.kulData.nodes;\n    for (let index = 0; index < nodes.length; index++) {\n      const node = nodes[index];\n      elements.push(this.#recursive(node, 0));\n    }\n    return <Fragment>{elements}</Fragment>;\n  }\n\n  /*-------------------------------------------------*/\n  /*          L i f e c y c l e   H o o k s          */\n  /*-------------------------------------------------*/\n\n  componentWillLoad() {\n    this.#kulManager.theme.register(this);\n  }\n\n  componentDidLoad() {\n    this.onKulEvent(new CustomEvent(\"ready\"), \"ready\");\n    this.#kulManager.debug.updateDebugInfo(this, \"did-load\");\n  }\n\n  componentWillRender() {\n    this.#kulManager.debug.updateDebugInfo(this, \"will-render\");\n  }\n\n  componentDidRender() {\n    this.#kulManager.debug.updateDebugInfo(this, \"did-render\");\n  }\n\n  render() {\n    return (\n      <Host>\n        {this.kulStyle ? (\n          <style id={KUL_STYLE_ID}>\n            {this.#kulManager.theme.setKulStyle(this)}\n          </style>\n        ) : undefined}\n        <div id={KUL_WRAPPER_ID}>\n          {this.kulData?.nodes?.length ? (\n            this.#prepArticle()\n          ) : (\n            <div class=\"empty-data\">\n              <div class=\"empty-data__text\">\n                {this.#kulManager.language.translate(\n                  KulLanguageGeneric.EMPTY_DATA,\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n      </Host>\n    );\n  }\n\n  disconnectedCallback() {\n    this.#kulManager.theme.unregister(this);\n  }\n}\n"],"version":3}