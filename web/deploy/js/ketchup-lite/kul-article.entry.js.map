{"file":"kul-article.entry.js","mappings":"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","names":[],"sources":["src/components/kul-article/kul-article-declarations.ts","src/components/kul-article/kul-article.scss?tag=kul-article&encapsulation=shadow","src/components/kul-article/kul-article.tsx"],"sourcesContent":["import {\n    KulDataDataset,\n    KulDataNode,\n} from '../../managers/kul-data/kul-data-declarations';\nimport { KulEventPayload } from '../../types/GenericTypes';\n\n//#region Dataset\nexport interface KulArticleDataset extends KulDataDataset {\n    nodes: KulArticleNode[];\n}\nexport interface KulArticleNode extends KulDataNode {\n    children?: KulArticleNode[];\n    tagName?: 'br' | 'code' | 'h1' | 'h2' | 'h3' | 'li' | 'pre' | 'strong';\n}\n//#endregion\n//#region Events\nexport type KulArticleEvent = 'kul-event' | 'ready' | 'unmount';\nexport interface KulArticleEventPayload\n    extends KulEventPayload<'KulArticle', KulArticleEvent> {}\n//#endregion\n//#region Props\nexport enum KulArticleProps {\n    kulData = 'Actual data of the article',\n    kulStyle = 'Custom style of the component.',\n}\nexport interface KulArticlePropsInterface {\n    kulData?: KulArticleDataset;\n    kulStyle?: string;\n}\n//#endregion\n","@import './styles/kul-article-main.scss';\n@import './styles/kul-article-classes.scss';\n","import {\n    Component,\n    Element,\n    Event,\n    EventEmitter,\n    forceUpdate,\n    Fragment,\n    h,\n    Host,\n    Method,\n    Prop,\n    State,\n    VNode,\n} from '@stencil/core';\nimport {\n    KulArticleDataset,\n    KulArticleEvent,\n    KulArticleEventPayload,\n    KulArticleNode,\n    KulArticleProps,\n} from './kul-article-declarations';\nimport { kulManagerInstance } from '../../managers/kul-manager/kul-manager';\nimport { getProps } from '../../utils/componentUtils';\nimport { KUL_STYLE_ID, KUL_WRAPPER_ID } from '../../variables/GenericVariables';\nimport { KulDebugLifecycleInfo } from '../../managers/kul-debug/kul-debug-declarations';\nimport { GenericObject } from '../../types/GenericTypes';\nimport { KulLanguageGeneric } from '../../managers/kul-language/kul-language-declarations';\n\n@Component({\n    assetsDirs: ['assets/fonts'],\n    tag: 'kul-article',\n    styleUrl: 'kul-article.scss',\n    shadow: true,\n})\nexport class KulArticle {\n    /**\n     * References the root HTML element of the component (<kul-article>).\n     */\n    @Element() rootElement: HTMLKulArticleElement;\n\n    /*-------------------------------------------------*/\n    /*                   S t a t e s                   */\n    /*-------------------------------------------------*/\n\n    /**\n     * Debug information.\n     */\n    @State() debugInfo: KulDebugLifecycleInfo = {\n        endTime: 0,\n        renderCount: 0,\n        renderEnd: 0,\n        renderStart: 0,\n        startTime: performance.now(),\n    };\n\n    /*-------------------------------------------------*/\n    /*                    P r o p s                    */\n    /*-------------------------------------------------*/\n\n    /**\n     * The actual data of the article.\n     * @default null\n     */\n    @Prop({ mutable: true }) kulData: KulArticleDataset = null;\n    /**\n     * Enables customization of the component's style.\n     * @default \"\" - No custom style applied by default.\n     */\n    @Prop({ mutable: true, reflect: true }) kulStyle = '';\n\n    /*-------------------------------------------------*/\n    /*       I n t e r n a l   V a r i a b l e s       */\n    /*-------------------------------------------------*/\n\n    #kulManager = kulManagerInstance();\n\n    /*-------------------------------------------------*/\n    /*                   E v e n t s                   */\n    /*-------------------------------------------------*/\n\n    /**\n     * Describes event emitted.\n     */\n    @Event({\n        eventName: 'kul-article-event',\n        composed: true,\n        cancelable: false,\n        bubbles: true,\n    })\n    kulEvent: EventEmitter<KulArticleEventPayload>;\n\n    onKulEvent(e: Event | CustomEvent, eventType: KulArticleEvent) {\n        this.kulEvent.emit({\n            comp: this,\n            eventType,\n            id: this.rootElement.id,\n            originalEvent: e,\n        });\n    }\n\n    /*-------------------------------------------------*/\n    /*           P u b l i c   M e t h o d s           */\n    /*-------------------------------------------------*/\n\n    /**\n     * Retrieves the debug information reflecting the current state of the component.\n     * @returns {Promise<KulDebugLifecycleInfo>} A promise that resolves to a KulDebugLifecycleInfo object containing debug information.\n     */\n    @Method()\n    async getDebugInfo(): Promise<KulDebugLifecycleInfo> {\n        return this.debugInfo;\n    }\n    /**\n     * Retrieves the properties of the component, with optional descriptions.\n     * @param {boolean} descriptions - If true, returns properties with descriptions; otherwise, returns properties only.\n     * @returns {Promise<GenericObject>} A promise that resolves to an object where each key is a property name, optionally with its description.\n     */\n    @Method()\n    async getProps(descriptions?: boolean): Promise<GenericObject> {\n        return getProps(this, KulArticleProps, descriptions);\n    }\n    /**\n     * Triggers a re-render of the component to reflect any state changes.\n     */\n    @Method()\n    async refresh(): Promise<void> {\n        forceUpdate(this);\n    }\n    /**\n     * Initiates the unmount sequence, which removes the component from the DOM after a delay.\n     * @param {number} ms - Number of milliseconds\n     */\n    @Method()\n    async unmount(ms: number = 0): Promise<void> {\n        setTimeout(() => {\n            this.onKulEvent(new CustomEvent('unmount'), 'unmount');\n            this.rootElement.remove();\n        }, ms);\n    }\n\n    /*-------------------------------------------------*/\n    /*           P r i v a t e   M e t h o d s         */\n    /*-------------------------------------------------*/\n\n    #recursive(node: KulArticleNode, depth: number) {\n        switch (depth) {\n            case 0:\n                return this.#articleTemplate(node, depth);\n            case 1:\n                return this.#sectionTemplate(node, depth);\n            case 2:\n                return this.#paragraphTemplate(node, depth);\n            default:\n                return node.children?.length\n                    ? this.#wrapperTemplate(node, depth)\n                    : this.#contentTemplate(node, depth);\n        }\n    }\n\n    #articleTemplate(node: KulArticleNode, depth: number): VNode {\n        return (\n            <Fragment>\n                <article\n                    class=\"article\"\n                    data-depth={depth.toString()}\n                    style={node.cssStyle}\n                >\n                    {node.value ? <h1>{node.value}</h1> : undefined}\n                    {node.children\n                        ? node.children.map((child) =>\n                              this.#recursive(child, depth + 1)\n                          )\n                        : null}\n                </article>\n            </Fragment>\n        );\n    }\n\n    #sectionTemplate(node: KulArticleNode, depth: number): VNode {\n        return (\n            <Fragment>\n                <section\n                    class=\"section\"\n                    data-depth={depth.toString()}\n                    style={node.cssStyle}\n                >\n                    {node.value ? <h2>{node.value}</h2> : undefined}\n                    {node.children\n                        ? node.children.map((child) =>\n                              this.#recursive(child, depth + 1)\n                          )\n                        : null}\n                </section>\n            </Fragment>\n        );\n    }\n\n    #wrapperTemplate(node: KulArticleNode, depth: number): VNode {\n        const ComponentTag = node.children?.some(\n            (child) => child.tagName === 'li'\n        )\n            ? 'ul'\n            : node.tagName\n              ? node.tagName\n              : 'div';\n        return (\n            <Fragment>\n                {node.value ? <div>{node.value}</div> : ''}\n                <ComponentTag\n                    class=\"content-wrapper\"\n                    data-depth={depth.toString()}\n                    style={node.cssStyle}\n                >\n                    {node.children\n                        ? node.children.map((child) =>\n                              this.#recursive(child, depth + 1)\n                          )\n                        : null}\n                </ComponentTag>\n            </Fragment>\n        );\n    }\n\n    #paragraphTemplate(node: KulArticleNode, depth: number): VNode {\n        return (\n            <Fragment>\n                <p\n                    class=\"paragraph\"\n                    data-depth={depth.toString()}\n                    style={node.cssStyle}\n                >\n                    {node.value ? <h3>{node.value}</h3> : undefined}\n                    {node.children\n                        ? node.children.map((child) =>\n                              this.#recursive(child, depth + 1)\n                          )\n                        : null}\n                </p>\n            </Fragment>\n        );\n    }\n\n    #contentTemplate(node: KulArticleNode, depth: number): VNode {\n        const decorator = kulManagerInstance().data.cell.shapes.decorate;\n\n        const key = node?.cells && Object.keys(node.cells)[0];\n        const cell = node?.cells?.[key];\n\n        if (cell) {\n            const shape = decorator(cell.shape, [cell], async (e) =>\n                this.onKulEvent(e, 'kul-event')\n            );\n            return shape.element[0];\n        } else {\n            const ComponentTag = node.tagName ? node.tagName : 'span';\n            return (\n                <ComponentTag\n                    class={`content content--${ComponentTag}`}\n                    data-depth={depth.toString()}\n                    style={node.cssStyle}\n                >\n                    {node.value}\n                </ComponentTag>\n            );\n        }\n    }\n\n    #prepArticle(): VNode[] {\n        const elements: VNode[] = [];\n        const nodes = this.kulData.nodes;\n        for (let index = 0; index < nodes.length; index++) {\n            const node = nodes[index];\n            elements.push(this.#recursive(node, 0));\n        }\n        return <Fragment>{elements}</Fragment>;\n    }\n\n    /*-------------------------------------------------*/\n    /*          L i f e c y c l e   H o o k s          */\n    /*-------------------------------------------------*/\n\n    componentWillLoad() {\n        this.#kulManager.theme.register(this);\n    }\n\n    componentDidLoad() {\n        this.onKulEvent(new CustomEvent('ready'), 'ready');\n        this.#kulManager.debug.updateDebugInfo(this, 'did-load');\n    }\n\n    componentWillRender() {\n        this.#kulManager.debug.updateDebugInfo(this, 'will-render');\n    }\n\n    componentDidRender() {\n        this.#kulManager.debug.updateDebugInfo(this, 'did-render');\n    }\n\n    render() {\n        return (\n            <Host>\n                {this.kulStyle ? (\n                    <style id={KUL_STYLE_ID}>\n                        {this.#kulManager.theme.setKulStyle(this)}\n                    </style>\n                ) : undefined}\n                <div id={KUL_WRAPPER_ID}>\n                    {this.kulData?.nodes?.length ? (\n                        this.#prepArticle()\n                    ) : (\n                        <div class=\"empty-data\">\n                            <div class=\"empty-data__text\">\n                                {this.#kulManager.language.translate(\n                                    KulLanguageGeneric.EMPTY_DATA\n                                )}\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </Host>\n        );\n    }\n\n    disconnectedCallback() {\n        this.#kulManager.theme.unregister(this);\n    }\n}\n"],"version":3}