{"file":"kul-compare.entry.js","mappings":"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","names":[],"sources":["src/components/kul-compare/kul-compare-declarations.ts","src/components/kul-compare/helpers/kul-compare-defaults.ts","src/components/kul-compare/kul-compare.scss?tag=kul-compare&encapsulation=shadow","src/components/kul-compare/kul-compare.tsx"],"sourcesContent":["import {\n    KulDataDataset,\n    KulDataShapes,\n} from '../../managers/kul-data/kul-data-declarations';\nimport { KulEventPayload } from '../../types/GenericTypes';\n\n/*-------------------------------------------------*/\n/*                   E v e n t s                   */\n/*-------------------------------------------------*/\nexport type KulCompareEvent = 'kul-event' | 'ready' | 'unmount';\nexport interface KulCompareEventPayload\n    extends KulEventPayload<'KulCompare', KulCompareEvent> {}\n/*-------------------------------------------------*/\n/*                    P r o p s                    */\n/*-------------------------------------------------*/\nexport enum KulCompareProps {\n    kulData = 'Actual data to compare.',\n    kulShape = 'Sets the type of shapes to compare.',\n    kulStyle = 'Sets a custom CSS style for the component.',\n    kulView = 'Sets the type of view, either styled as a before-after or a side-by-side comparison.',\n}\nexport interface KulComparePropsInterface {\n    kulData?: KulDataDataset;\n    kulShape?: KulDataShapes;\n    kulStyle?: string;\n    kulView?: KulCompareView;\n}\nexport type KulCompareView = 'overlay' | 'split';\n","import { KulDataShapeDefaults } from '../../../managers/kul-data/kul-data-declarations';\n\nexport const SOURCE_DEFAULTS: KulDataShapeDefaults = {\n    image: () => [\n        {\n            kulSizeX: '100%',\n            kulSizeY: '100%',\n        },\n    ],\n};\n\nexport const TARGET_DEFAULTS: KulDataShapeDefaults = {\n    image: () => [\n        {\n            kulSizeX: 'auto',\n            kulSizeY: '100%',\n        },\n    ],\n};\n","@import './styles/kul-compare-main.scss';\n@import './styles/kul-compare-classes.scss';\n","import {\n    Component,\n    Element,\n    Event,\n    EventEmitter,\n    forceUpdate,\n    Fragment,\n    h,\n    Host,\n    Method,\n    Prop,\n    State,\n} from '@stencil/core';\nimport { type GenericObject } from '../../types/GenericTypes';\nimport { kulManagerInstance } from '../../managers/kul-manager/kul-manager';\nimport {\n    KulDataDataset,\n    KulDataShapes,\n    KulDataShapesMap,\n} from '../../managers/kul-data/kul-data-declarations';\nimport { KulDebugLifecycleInfo } from '../../managers/kul-debug/kul-debug-declarations';\nimport { getProps } from '../../utils/componentUtils';\nimport { KUL_STYLE_ID, KUL_WRAPPER_ID } from '../../variables/GenericVariables';\nimport {\n    KulCompareEvent,\n    KulCompareEventPayload,\n    KulCompareProps,\n    KulCompareView,\n} from './kul-compare-declarations';\nimport {\n    SOURCE_DEFAULTS,\n    TARGET_DEFAULTS,\n} from './helpers/kul-compare-defaults';\n\n@Component({\n    tag: 'kul-compare',\n    styleUrl: 'kul-compare.scss',\n    shadow: true,\n})\nexport class KulCompare {\n    /**\n     * References the root HTML element of the component (<kul-compare>).\n     */\n    @Element() rootElement: HTMLKulCompareElement;\n\n    /*-------------------------------------------------*/\n    /*                   S t a t e s                   */\n    /*-------------------------------------------------*/\n\n    /**\n     * Debug information.\n     */\n    @State() debugInfo: KulDebugLifecycleInfo = {\n        endTime: 0,\n        renderCount: 0,\n        renderEnd: 0,\n        renderStart: 0,\n        startTime: performance.now(),\n    };\n    /**\n     * The shapes of the component.\n     * @default undefined\n     *\n     * @see KulDataShapesMap - For a list of possible shapes.\n     */\n    @State() shapes: KulDataShapesMap;\n    /**\n     * The current view of the compare.\n     * @default \"before-after\"\n     */\n    @State() view: KulCompareView = 'overlay';\n\n    /*-------------------------------------------------*/\n    /*                    P r o p s                    */\n    /*-------------------------------------------------*/\n\n    /**\n     * Actual data of the compare.\n     * @default null\n     */\n    @Prop({ mutable: true }) kulData: KulDataDataset = null;\n    /**\n     * Sets the type of shapes to compare.\n     * @default \"\"\n     */\n    @Prop({ mutable: true, reflect: true }) kulShape: KulDataShapes = 'image';\n    /**\n     * Custom style of the component.\n     * @default \"\"\n     */\n    @Prop({ mutable: true, reflect: true }) kulStyle = '';\n    /**\n     * Sets the type of view, either styled as a before-after or a side-by-side comparison.\n     * @default null\n     */\n    @Prop({ mutable: true }) kulView: KulCompareView = 'overlay';\n\n    /*-------------------------------------------------*/\n    /*       I n t e r n a l   V a r i a b l e s       */\n    /*-------------------------------------------------*/\n\n    #kulManager = kulManagerInstance();\n\n    /*-------------------------------------------------*/\n    /*                   E v e n t s                   */\n    /*-------------------------------------------------*/\n\n    /**\n     * Describes event emitted.\n     */\n    @Event({\n        eventName: 'kul-compare-event',\n        composed: true,\n        cancelable: false,\n        bubbles: true,\n    })\n    kulEvent: EventEmitter<KulCompareEventPayload>;\n\n    onKulEvent(e: Event | CustomEvent, eventType: KulCompareEvent) {\n        this.kulEvent.emit({\n            comp: this,\n            eventType,\n            id: this.rootElement.id,\n            originalEvent: e,\n        });\n    }\n\n    /*-------------------------------------------------*/\n    /*           P u b l i c   M e t h o d s           */\n    /*-------------------------------------------------*/\n\n    /**\n     * Fetches debug information of the component's current state.\n     * @returns {Promise<KulDebugLifecycleInfo>} A promise that resolves with the debug information object.\n     */\n    @Method()\n    async getDebugInfo(): Promise<KulDebugLifecycleInfo> {\n        return this.debugInfo;\n    }\n    /**\n     * Used to retrieve component's properties and descriptions.\n     * @param {boolean} descriptions - When true, includes descriptions for each property.\n     * @returns {Promise<GenericObject>} Promise resolved with an object containing the component's properties.\n     */\n    @Method()\n    async getProps(descriptions?: boolean): Promise<GenericObject> {\n        return getProps(this, KulCompareProps, descriptions);\n    }\n    /**\n     * This method is used to trigger a new render of the component.\n     */\n    @Method()\n    async refresh(): Promise<void> {\n        forceUpdate(this);\n    }\n    /**\n     * Initiates the unmount sequence, which removes the component from the DOM after a delay.\n     * @param {number} ms - Number of milliseconds\n     */\n    @Method()\n    async unmount(ms: number = 0): Promise<void> {\n        setTimeout(() => {\n            this.onKulEvent(new CustomEvent('unmount'), 'unmount');\n            this.rootElement.remove();\n        }, ms);\n    }\n\n    /*-------------------------------------------------*/\n    /*           P r i v a t e   M e t h o d s         */\n    /*-------------------------------------------------*/\n\n    #isOverlay() {\n        return !!(this.view === 'overlay');\n    }\n\n    #prepChangeView() {\n        return (\n            <div class=\"change-view\">\n                <kul-button\n                    kulIcon=\"compare\"\n                    kulIconOff=\"book-open\"\n                    kulStyling=\"icon\"\n                    kulToggable={true}\n                    onClick={() => {\n                        this.view = this.#isOverlay() ? 'split' : 'overlay';\n                    }}\n                    title={\n                        this.#isOverlay()\n                            ? 'Click for split screen comparison.'\n                            : 'Click for overlay comparison'\n                    }\n                ></kul-button>\n            </div>\n        );\n    }\n\n    #prepView() {\n        const rawShapes = this.shapes[this.kulShape];\n\n        const shapes = this.#kulManager.data.cell.shapes.decorate(\n            this.kulShape,\n            rawShapes,\n            async (e) => this.onKulEvent(e, 'kul-event'),\n            [\n                ...SOURCE_DEFAULTS[this.kulShape](),\n                ...TARGET_DEFAULTS[this.kulShape](),\n            ]\n        ).element;\n\n        return (\n            <Fragment>\n                <div class={`view view--${this.view}`}>\n                    <div class=\"view__source\">{shapes[0]}</div>\n                    {this.#isOverlay() ? (\n                        <div\n                            class=\"draggable-slider\"\n                            onInput={this.#updateOverlayWidth.bind(this)}\n                        >\n                            <input\n                                class=\"draggable-slider__input\"\n                                type=\"range\"\n                                min=\"0\"\n                                max=\"100\"\n                                value=\"50\"\n                            />\n                        </div>\n                    ) : null}\n                    <div class=\"view__target\">{shapes[1]}</div>\n                </div>\n            </Fragment>\n        );\n    }\n\n    #prepCompare() {\n        const hasShapes = !!this.shapes?.[this.kulShape];\n        if (hasShapes) {\n            const shapes = this.shapes[this.kulShape];\n            if (shapes?.length > 1) {\n                return (\n                    <div class=\"grid\">\n                        {this.#prepView()}\n                        {this.#prepChangeView()}\n                    </div>\n                );\n            }\n        }\n    }\n\n    #updateOverlayWidth(event: InputEvent) {\n        const sliderValue = (event.target as HTMLInputElement).value;\n        this.rootElement.style.setProperty(\n            '--kul_compare_overlay_width',\n            `${sliderValue}%`\n        );\n    }\n\n    /*-------------------------------------------------*/\n    /*          L i f e c y c l e   H o o k s          */\n    /*-------------------------------------------------*/\n\n    componentWillLoad() {\n        this.#kulManager.theme.register(this);\n    }\n\n    componentDidLoad() {\n        this.onKulEvent(new CustomEvent('ready'), 'ready');\n        this.#kulManager.debug.updateDebugInfo(this, 'did-load');\n    }\n\n    componentWillRender() {\n        this.#kulManager.debug.updateDebugInfo(this, 'will-render');\n        if (this.kulData) {\n            this.shapes = this.#kulManager.data.cell.shapes.getAll(\n                this.kulData\n            );\n        }\n    }\n\n    componentDidRender() {\n        this.#kulManager.debug.updateDebugInfo(this, 'did-render');\n    }\n\n    render() {\n        return (\n            <Host>\n                {this.kulStyle ? (\n                    <style id={KUL_STYLE_ID}>\n                        {this.#kulManager.theme.setKulStyle(this)}\n                    </style>\n                ) : undefined}\n                <div id={KUL_WRAPPER_ID}>\n                    <div class=\"compare\">{this.#prepCompare()}</div>\n                </div>\n            </Host>\n        );\n    }\n\n    disconnectedCallback() {\n        this.#kulManager.theme.unregister(this);\n    }\n}\n"],"version":3}